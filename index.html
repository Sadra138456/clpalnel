<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پنل رزرواسیون واکسن کلینیک پارسیان</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font/dist/font-face.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
  <body data-theme="purple-gradient-1">
    <!-- Loader -->
    <div id="page-loader">
        <div class="loader-icon"><i class="fas fa-spinner fa-spin"></i></div>
        <p>در حال بارگذاری...</p>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="page active">
        <div class="login-wrapper">
            <div class="login-container glass-effect-card advanced-glass-effect">
                <div class="login-header">
                    <div class="login-icon-area">
                        <i class="fas fa-paw login-main-icon"></i>
                    </div>
                    <h1>کلینیک دامپزشکی <span>پارسیان</span></h1>
                    <p>مدیریت هوشمند رزرواسیون واکسن</p>
                </div>
                <form id="login-form" class="login-form-modern">
                    <div class="form-group">
                        <div class="floating-label advanced-label">
                            <input type="text" id="username" placeholder="نام کاربری" required autocomplete="off">
                            <label for="username"><i class="fas fa-user"></i> نام کاربری</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="floating-label advanced-label">
                            <input type="password" id="password" placeholder="رمز عبور" required autocomplete="off">
                            <label for="password"><i class="fas fa-lock"></i> رمز عبور</label>
                            <button type="button" class="toggle-password-visibility" title="نمایش/مخفی کردن رمز">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-shine btn-advanced-login" id="login-button">
                        <i class="fas fa-sign-in-alt"></i> ورود به پنل
                    </button>
                </form>
                <div class="login-footer">
                    <p>فراموشی رمز عبور؟ <a href="#" class="forgot-password-link">بازیابی</a></p>
                    <p class="login-footer-text">طراحی و توسعه توسط صدرا</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page">
        <header class="dashboard-header glass-effect-card sticky-header">
            <div class="header-left">
                <button class="nav-action-btn" id="sidebar-toggle-btn" title="باز کردن منو">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo-area">
                    <i class="fas fa-paw header-logo-icon"></i>
                    <span class="header-title">کلینیک پارسیان</span>
                </div>
            </div>
            <div class="header-center-search">
                <div class="search-bar-global">
                    <input type="text" id="global-search-input" placeholder="جستجوی رزروها...">
                    <i class="fas fa-search search-bar-icon"></i>
                </div>
            </div>
            <div class="header-right-actions">
                <button class="nav-action-btn" id="theme-toggle-btn" title="تغییر تم">
                    <i class="fas fa-palette"></i>
                </button>
                <div class="profile-menu-container">
                    <button class="nav-action-btn profile-avatar-btn" id="profile-toggle" title="منوی کاربر">
                        <img src="https://via.placeholder.com/100" alt="Avatar" id="header-avatar-img" class="header-avatar">
                    </button>
                    <div class="dropdown-panel glass-effect-card" id="profile-dropdown">
                        <div class="dropdown-user-info">
                            <img src="https://via.placeholder.com/100" alt="Avatar" id="dropdown-avatar-img" class="dropdown-avatar-large">
                            <div>
                                <strong>ادمین</strong>
                                <small>مدیر کلینیک</small>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="account-settings-btn">
                            <i class="fas fa-user-cog"></i> تنظیمات حساب
                        </button>
                        <button class="dropdown-item" id="contact-developer-dropdown">
                            <i class="fas fa-headset"></i> تماس با پشتیبانی
                        </button>
                        <button class="dropdown-item danger-item" id="logout-button">
                            <i class="fas fa-sign-out-alt"></i> خروج از سیستم
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <nav class="sidebar-nav glass-effect-card" id="sidebar-nav">
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-section="dashboard-main-view"><i class="fas fa-home"></i> پیشخوان</a></li>
                    <li><a href="#" class="nav-link" data-section="reservation-form-section"><i class="fas fa-plus-circle"></i> رزرو جدید</a></li>
                    <li><a href="#" class="nav-link" data-section="reservation-list-section"><i class="fas fa-list"></i> لیست رزروها <span class="nav-badge" id="sidebar-reservation-count">0</span></a></li>
                    <li><a href="#" class="nav-link" data-section="settings-page"><i class="fas fa-cog"></i> تنظیمات</a></li>
                    <li><a href="#sms-panel-section" class="nav-link"><i class="fas fa-sms"></i> ارسال پیامک</a></li>

                </ul>
            </nav>
            <div class="sidebar-footer">© <span id="current-year"></span> کلینیک پارسیان</div>
        </nav>

        <main class="main-content-area" id="main-content-area">
            <!-- Dashboard View -->
            <section id="dashboard-main-view" class="content-section active-content-section">
                <div class="section-header-bar">
                    <h2><i class="fas fa-home"></i> پیشخوان مدیریتی</h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card glass-effect-card">
                        <h4><i class="fas fa-list"></i> رزروهای فعال</h4>
                        <p id="stat-active-reservations">0</p>
                    </div>
                    <div class="stat-card glass-effect-card placeholder-card">
                        <h4><i class="fas fa-chart-bar"></i> آمار بیشتر</h4>
                        <p>به زودی...</p>
                    </div>
                </div>
            </section>

<!-- Reservation Form (بخش به‌روزرسانی‌شده) -->
<section id="reservation-form-section" class="content-section">
  <div class="section-header-bar">
    <h2><i class="fas fa-plus-circle"></i> ثبت رزرو جدید</h2>
  </div>
  <div class="glass-effect-card form-card-padding">
    <form id="reservation-form" class="modern-form">
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="text" id="petName" placeholder="نام حیوان" required>
            <label for="petName"><i class="fas fa-paw"></i> نام حیوان</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="text" id="ownerName" placeholder="نام صاحب" required>
            <label for="ownerName"><i class="fas fa-user"></i> نام صاحب</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="tel" id="phoneNumber" placeholder="شماره تماس" required>
            <label for="phoneNumber"><i class="fas fa-phone"></i> شماره تماس</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="date" id="visitDate" required>
            <label for="visitDate"><i class="fas fa-calendar-check"></i> تاریخ مراجعه</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="date" id="nextVisitDate" required>
            <label for="nextVisitDate"><i class="fas fa-calendar-plus"></i> تاریخ مراجعه بعدی</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="text" id="breed" placeholder="نژاد">
            <label for="breed"><i class="fas fa-paw"></i> نژاد</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="number" id="weight" placeholder="وزن (کیلوگرم)">
            <label for="weight"><i class="fas fa-weight"></i> وزن</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="number" id="birthYear" placeholder="سال تولد">
            <label for="birthYear"><i class="fas fa-birthday-cake"></i> سال تولد</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="floating-label">
            <input type="number" id="price" placeholder="قیمت (تومان)">
            <label for="price"><i class="fas fa-money-bill-wave"></i> قیمت</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-12">
          <label class="static-label"><i class="fas fa-syringe"></i> نوع واکسن</label>
          <select id="vaccineType" class="custom-select-modern" required>
            <option value="">-- لطفا یک مورد را انتخاب کنید --</option>
            <option value="هاری">هاری</option>
            <option value="چندگانه">چندگانه</option>
            <option value="سایر">سایر</option>
          </select>
          <span class="validation-indicator-static"></span>
        </div>
      </div>
      <div class="form-row" id="customVaccineTypeGroup" style="display: none;">
        <div class="form-group col-md-12">
          <div class="floating-label">
            <input type="text" id="customVaccineTypeInput" placeholder="شرح نوع 'سایر'">
            <label for="customVaccineTypeInput"><i class="fas fa-notes-medical"></i> شرح نوع "سایر"</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-12">
          <div class="floating-label">
            <textarea id="notes" placeholder="یادداشت‌ها"></textarea>
            <label for="notes"><i class="fas fa-comment"></i> یادداشت‌ها</label>
            <span class="validation-indicator"></span>
          </div>
        </div>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-outline-danger" id="reset-form-button">
          <i class="fas fa-undo"></i> بازنشانی فرم
        </button>
        <button type="submit" class="btn btn-primary btn-shine" id="submit-reservation-button">
          <i class="fas fa-paper-plane"></i> ثبت رزرو
        </button>
      </div>
    </form>
  </div>
</section>

<!-- SMS Panel Section (بخش به‌روزرسانی‌شده) -->
<section id="sms-panel-section" class="content-section">
  <div class="section-header-bar">
    <h2><i class="fas fa-sms"></i> مدیریت ارسال پیامک</h2>
  </div>
  
  <!-- تنظیمات پیامک -->
  <div class="glass-effect-card form-card-padding" style="margin-bottom: 1.5rem;">
    <h3><i class="fas fa-cog"></i> تنظیمات پیامک</h3>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label class="static-label"><i class="fas fa-key"></i> کلید API پیامک</label>
        <input type="text" id="sms-api-key" class="form-control" placeholder="کلید API خود را وارد کنید">
      </div>
      <div class="form-group col-md-6">
        <label class="static-label"><i class="fas fa-clock"></i> زمان پیش‌فرض ارسال</label>
        <select id="sms-default-send-before" class="custom-select-modern">
          <option value="1">۱ روز قبل</option>
          <option value="2">۲ روز قبل</option>
          <option value="3">۳ روز قبل</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-12">
        <label class="static-label"><i class="fas fa-edit"></i> متن پیش‌فرض پیامک</label>
        <textarea id="sms-template" class="custom-textarea" rows="3" placeholder="متن پیش‌فرض پیامک...">سلام، یادآور واکسن [نام حیوان] شما در تاریخ [تاریخ] می باشد. کلینیک پارسیان</textarea>
        <small class="text-muted">می‌توانید از [نام حیوان] و [تاریخ] برای جایگذاری خودکار استفاده کنید</small>
      </div>
    </div>
    <div class="form-actions">
      <button type="button" class="btn btn-success" id="save-sms-settings-btn">
        <i class="fas fa-save"></i> ذخیره تنظیمات
      </button>
    </div>
  </div>

  <!-- ارسال پیامک -->
  <div class="glass-effect-card form-card-padding">
    <h3><i class="fas fa-paper-plane"></i> ارسال پیامک</h3>
    <div class="sms-panel-container">
      <div class="form-row">
        <div class="form-group col-md-12">
          <label class="static-label"><i class="fas fa-list-ul"></i> انتخاب رزرو برای ارسال پیامک</label>
          <select id="sms-reservation-select" class="custom-select-modern" required>
            <option value="">-- انتخاب کنید --</option>
          </select>
        </div>
      </div>
      
      <!-- اطلاعات رزرو انتخاب شده -->
      <div id="selected-reservation-info" class="glass-effect-card" style="margin: 1rem 0; padding: 1rem; display: none; background: var(--bg-input);">
        <h4><i class="fas fa-info-circle"></i> اطلاعات رزرو انتخاب شده</h4>
        <div class="reservation-info-grid">
          <div><strong>نام حیوان:</strong> <span id="info-pet-name">-</span></div>
          <div><strong>صاحب:</strong> <span id="info-owner-name">-</span></div>
          <div><strong>شماره تماس:</strong> <span id="info-phone">-</span></div>
          <div><strong>تاریخ مراجعه بعدی:</strong> <span id="info-next-date">-</span></div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group col-md-8">
          <label class="static-label"><i class="fas fa-sms"></i> متن پیام</label>
          <textarea id="sms-message" class="custom-textarea" placeholder="متن پیام خود را وارد کنید..." required rows="4"></textarea>
        </div>
        <div class="form-group col-md-4">
          <label class="static-label"><i class="fas fa-clock"></i> زمان ارسال</label>
          <select id="sms-send-before" class="custom-select-modern">
            <option value="0">هم‌اکنون</option>
            <option value="1">۱ روز قبل از مراجعه</option>
            <option value="2">۲ روز قبل از مراجعه</option>
            <option value="3">۳ روز قبل از مراجعه</option>
          </select>
        </div>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-outline-secondary" id="use-template-btn">
          <i class="fas fa-copy"></i> استفاده از متن پیش‌فرض
        </button>
        <button type="button" class="btn btn-primary" id="send-sms-button" disabled>
          <i class="fas fa-paper-plane"></i> ارسال پیامک
        </button>
      </div>
    </div>
    
    <!-- لیست پیامک‌های برنامه‌ریزی شده -->
    <div class="sms-scheduled-section" style="margin-top: 2rem;">
      <h4><i class="fas fa-calendar-alt"></i> پیامک‌های برنامه‌ریزی شده</h4>
      <div class="sms-scheduled-list" id="scheduled-sms-list"></div>
    </div>
  </div>
</section>
            <!-- Reservation List -->
            <section id="reservation-list-section" class="content-section">
                <div class="section-header-bar">
                    <h2><i class="fas fa-list"></i> لیست رزروهای فعال</h2>
                </div>
                <div class="list-view-controls">
                    <input type="text" class="form-control-compact" id="list-filter-input" placeholder="جستجو در رزروها...">
                    <select class="custom-select-compact" id="list-sort-dropdown">
                        <option value="date-desc">جدیدترین</option>
                        <option value="date-asc">قدیمی‌ترین</option>
                        <option value="name-asc">نام حیوان (الف-ی)</option>
                    </select>
                </div>
                <div id="reservation-list-grid" class="invoice-list-grid"></div>
                <div id="no-reservations-message" class="empty-list-placeholder">موردی برای نمایش وجود ندارد.</div>
            </section>

            <!-- Settings Page -->
            <section id="settings-page" class="content-section">
                <div class="section-header-bar">
                    <h2><i class="fas fa-cog"></i> تنظیمات پنل</h2>
                </div>
                <div class="settings-page-container glass-effect-card">
                    <h3><i class="fas fa-paint-brush"></i> تنظیمات ظاهری</h3>
                    <div class="setting-item-page">
                        <label>تم رنگی فعال:</label>
                        <select id="theme-select-page" class="custom-select-modern">
                            <option value="glass-dark">شیشه‌ای تیره</option>
                            <option value="glass-light">شیشه‌ای روشن</option>
                            <option value="purple-gradient-1">بنفش گرادیانت ۱ (پیش‌فرض)</option>
                            <option value="purple-gradient-2">بنفش گرادیانت ۲</option>
                            <option value="purple-gradient-3">بنفش گرادیانت ۳</option>
                        </select>
                    </div>
                    <div class="setting-item-page">
                        <label>انیمیشن پس‌زمینه گرادیانت:</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="gradient-animation-toggle-page" checked>
                            <span class="slider round"></span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="dashboard-footer glass-effect-card">
            © <span id="current-year-footer"></span> کلینیک دامپزشکی پارسیان. طراحی و اجرا: صدرا با <span class="footer-heart">♥</span>
        </footer>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Account Settings Modal -->
    <div class="modal-overlay" id="account-settings-modal-overlay"></div>
    <div class="modal glass-effect-card" id="account-settings-modal">
        <div class="modal-header">
            <h3><i class="fas fa-user-cog"></i> تنظیمات حساب کاربری</h3>
            <button class="modal-close-btn" id="account-settings-close-btn">×</button>
        </div>
        <div class="modal-body">
            <div class="profile-picture-section">
                <img src="https://via.placeholder.com/100" alt="عکس پروفایل" id="profile-pic-preview" class="profile-pic-preview">
                <div class="profile-picture-actions">
                    <label for="profile-pic-upload" class="btn btn-primary btn-sm">
                        <i class="fas fa-upload"></i> انتخاب عکس
                    </label>
                    <input type="file" id="profile-pic-upload" accept="image/*" style="display: none;">
                    <p>فایل‌های PNG یا JPG (حداکثر ۱ مگابایت)</p>
                </div>
            </div>
            <div class="form-group">
                <div class="floating-label">
                    <input type="text" id="account-username" placeholder="نام کاربری جدید" value="admin">
                    <label for="account-username"><i class="fas fa-user"></i> نام کاربری</label>
                </div>
            </div>
            <div class="form-group">
                <div class="floating-label">
                    <input type="password" id="account-new-password" placeholder="رمز عبور جدید">
                    <label for="account-new-password"><i class="fas fa-lock"></i> رمز عبور جدید</label>
                </div>
            </div>
            <div class="form-group">
                <div class="floating-label">
                    <input type="password" id="account-confirm-password" placeholder="تکرار رمز عبور جدید">
                    <label for="account-confirm-password"><i class="fas fa-check-double"></i> تکرار رمز عبور</label>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline-danger" id="account-settings-cancel-btn">انصراف</button>
            <button class="btn btn-primary btn-shine" id="account-settings-save-btn">
                <i class="fas fa-save"></i> ذخیره تغییرات
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
